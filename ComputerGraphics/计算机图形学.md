# 基本概念

## 基本图形单元

基本图形单元根据物体所在维度可分为图素（二维）、体素（三维）

### 图素

也称图元，是指可以用一定的几何参数和属性参数描述的最基本的二维图形输出元素。例如点、线、圆、圆弧、椭圆、二次曲线等

### 体素

是三维空间中可以用有限个尺寸参数定位和定形的最基本的单元体

### 图段

图段是具一组基元（图素、体素、图段）和其具有的一组性质构成的有实际意义的集合。比如说逻辑电路图就可以看作一个图段：直线、矩形、圆、文本是图段中的基元，各种门电路的链接规则作为图段的性质。单个的门就是最基本的图段



## 坐标系

分为建模坐标系、世界坐标系、观察坐标系、规范化设备坐标系、设备坐标系；其中世界坐标系又可继续细分。坐标系是逐步逐步变化得到的。

### 建模坐标系

建模坐标系（MC，Modeling Coordinate System）是一个局部的坐标系，它反映的是**一个图素或图段的结构和信息**（可以理解为每一个图素和图段都有它对应的建模坐标系来描述它的信息），它的存在目的是**便于直观表示图素或图段以及后续的坐标变换**（比如说平移、旋转、缩放等等），习惯上根据基本的图素和图段的特殊点来作为参考点。比如说一个圆形，就可以以它的圆心作为这个圆形对应建模坐标系的原点，后续也就可以通过比较简单的坐标变换（映射）来完成对这个图素的拓扑运动的表示。

### 世界坐标系

世界坐标系（WC，World Coordinate System）是一个全局坐标系。因为每一个对象都有自己对应的建模坐标系，当需要把各种各样的对象组合放置的时候，就需要抛弃每个对象的建模坐标系，以**一个**更加普遍的坐标系来描述**所有**对象的位置。（就像高中物理里面需要选取电场的零势能面来描述不同位置的电势一样）

### 观察坐标系

观察坐标系（VC,Viewing Coordinate System）也就是相当于在世界坐标系中放入了一个摄像机，根据视点（摄像机）的位置和方向，重新将所有世界坐标系内的对象重新描述并且重新定位，便于之后计算投影的图像。

### 规范化设备坐标系

规范化设备坐标系（NDC, Normalized Device Coordinate System）是一个中间坐标系。当我们选定了视点，确定了观察坐标系后，为了不受不同的输出设备影响，我们可以将对象描述转换到一个规范化设备坐标系，这个坐标系既独立于设备，又可以容易地转变成设备坐标系，这样就提高了可移植性和设备无关性。**规范化设备坐标系的坐标范围为 [0, 1]**

### 设备坐标系

设备坐标系（DC , DeviceCoordinate System）是对于输入输出设备而言的，对于每一个设备，都有一个单独的设备坐标系。在设备坐标系上可以确定一个有限显示区域，叫做视区，视区内就是最后人们所看到的部分（也就是各种物体的投影）。它的坐标系是**整数值**

# 基本图形的扫描转换

## 什么是扫描转换？

我们在计算机中描述一个模型的时候，往往使用了这些模型的顶点来进行描述整个模型。而我们的显示器也被称作光栅显示器（也就是可以看成一个个像素形成的点阵，每个像素可以由多种颜色显示），在光栅显示器上显示的任何一种图形都是多种颜色或一种颜色的像素的集合，如果想要在显示器上直观的将这个图形显示出来，就需要告诉显示器哪些像素要亮以及要亮成什么颜色。相当于将一个连续的几何体（直线、曲线等等）变成了离散的点集（像素）。确定这个像素集合和每个像素的颜色用于显示图形的过程就叫**图形的生成**，也叫做**光栅化**。更为标准的定义如下：在像素点阵中确定最佳逼近理想点集，并用指定的颜色显示这些像素点集的过程。更为概括的理解如下：光栅化就是找到所有被几何原型所占据的所有像素点。

**图形的扫描转换**是一种按照扫描线顺序来将光栅化的结果填入帧缓存寄存器的一种方式。图形的生成是从顶点描述的图形转化为图形对应的像素集的过程，而图形的扫描转换是包含图形的生成以及将生成的像素集以扫描线顺序填入帧缓存寄存器的过程。

小趣事：

光栅化英语为 Rasterize ，其中的 Raster 其实是德语的“屏幕”的意思

## 直线的扫描转换算法

给出直线两个端点，计算并输出最佳逼近直线的像素序列。这个过程也叫**直线的光栅化**

### 数值微分算法 DDA (Digital Differential Analyzer)

#### 算法核心

预先设置好绘制的步数`stepNum`，通过直线的微分方程确定每一步绘制的点的坐标增量（也可理解为将直线分成了等长的`stepNum`段），调整增量的大小使得两个坐标的最大增量固定为1，另一个方向上的坐标使用四舍五入。

#### 算法理解

首先是为什么对象是最大增量？根据前面描述的扫描转换思想，DDA的做法就是将垂直于长轴的直线作为扫描线，相当于保证在统一扫描线上，不会存在两个或者更多的点，这样才方便我们通过移动扫描线一个点一个点的表示和绘制。

然后是为什么最大增量是1？而我们最后需要得到是像素点阵，而像素的最小单位是1个，所以每次扫描线的移动距离为1。

#### 算法实现
